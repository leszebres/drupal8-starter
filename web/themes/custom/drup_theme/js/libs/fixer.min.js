!function(i){"use strict";i.Fixer=function(t,e){return this.elements={fixer:t,container:null},i.extend(!0,this.settings={},i.Fixer.defaults,e),this.state="default",this.scrollTop=0,this.previousScrollTop=0,this.fixerTop=0,this.fixerBottom=0,!!this.prepareOptions()&&this.init()},i.Fixer.defaults={container:void 0,from:void 0,to:void 0,reverse:!1,sensitivity:8,scrollerDependency:!1,classes:{prefix:"fixer",container:"{prefix}-container",element:"{prefix}-element",input:"is-input",fixed:"is-fixed",bottom:"is-bottom",reset:"is-reset"},afterEventsHandler:void 0,onScroll:void 0,onFixed:void 0,onBottom:void 0,onReset:void 0},i.Fixer.prototype={prepareOptions:function(){var s=this;return i.each(s.settings.classes,function(t,e){"string"==typeof e&&(s.settings.classes[t]=e.replace(/{prefix}/,s.settings.classes.prefix))}),!0},init:function(){return this.elements.container=void 0!==this.settings.container&&this.settings.container.length?this.settings.container:this.elements.fixer.parent(),this.elements.container.addClass(this.settings.classes.container),this.elements.fixer.addClass(this.settings.classes.element),this.setFixerTop(),this.setFixerBottom(),this.requestAnimationFramePolyfill(),this.eventsHander(),this},requestAnimationFramePolyfill:function(){var n=0,t=0,e=["o","ms","moz","webkit"];for(t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime(),s=Math.max(0,16-(e-n)),i=window.setTimeout(function(){t(e+s)},s);return n=e+s,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})},setFixerTop:function(){return void 0===this.settings.from?this.fixerTop=parseInt(this.elements.fixer.offset().top):this.settings.from<0?this.fixerTop=parseInt(this.elements.fixer.offset().top+this.settings.from):this.fixerTop=parseInt(this.settings.from),this},setFixerBottom:function(){return void 0===this.settings.to?this.fixerBottom=parseInt(this.elements.container.outerHeight()-this.elements.fixer.outerHeight()):this.settings.to<0?this.fixerBottom=parseInt(this.elements.container.outerHeight()-this.elements.fixer.outerHeight()+this.settings.to):this.fixerBottom=parseInt(this.settings.to),this.fixerBottom+=this.fixerTop,this},eventsHander:function(){var t=this,e=!1;return t.settings.scrollerDependency||i(window).on("scroll.fixer",{self:t},t.scrollHandler),i(window).on("touchstart.fixer",function(){!1===e&&(e=!0,t.elements.container.find(":input").on("focus blur",function(){t.elements.container.toggleClass(t.settings.classes.input)}))}),void 0!==t.settings.afterEventsHandler&&t.settings.afterEventsHandler.call({fixer:t,elements:t.elements}),t},scrollHandler:function(t){var e=void 0!==t.data&&void 0!==t.data.self?t.data.self:this;return window.requestAnimationFrame(function(){e.scrollTop=window.pageYOffset,Math.abs(e.previousScrollTop-e.scrollTop)>e.settings.sensitivity&&(e.settings.reverse?(e.previousScrollTop>e.scrollTop&&e.scrollTop>=e.fixerTop?e.toFixed():(e.previousScrollTop<e.scrollTop||e.scrollTop<e.fixerTop)&&e.toReset(),e.previousScrollTop=e.scrollTop):e.scrollTop>=e.fixerTop&&e.scrollTop<e.fixerBottom?e.toFixed():e.scrollTop>=e.fixerBottom?e.toBottom():e.toReset(),void 0!==e.settings.onScroll&&e.settings.onScroll.call({fixer:e,event:void 0===t.data?t.event:t,state:e.state}))}),e},toFixed:function(){return this.state="fixed",this.elements.container.removeClass(this.settings.classes.reset).removeClass(this.settings.classes.bottom).addClass(this.settings.classes.fixed),void 0!==this.settings.onFixed&&this.settings.onFixed.call(this),this},toBottom:function(){return this.state="bottom",this.elements.container.removeClass(this.settings.classes.reset).removeClass(this.settings.classes.fixed).addClass(this.settings.classes.bottom),void 0!==this.settings.onBottom&&this.settings.onBottom.call(this),this},toReset:function(){return this.elements.container.removeClass(this.settings.classes.fixed),"fixed"===this.state&&this.elements.container.addClass(this.settings.classes.reset),this.state="default",void 0!==this.settings.onReset&&this.settings.onReset.call(this),this}},i.fn.fixer=function(t){return new i.Fixer(i(this),t)}}(jQuery);
