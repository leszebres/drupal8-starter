!function(o){"use strict";o.Scroller=function(t){return o.extend(!0,this.settings={},o.Scroller.defaults,t),this.toDisplay=[],this.timeout=null,this.container={width:0,height:0},this.offset={current:{x:0,y:0},previous:{x:0,y:0}},this.direction=null,!!this.prepareOptions()&&this.init()},o.Scroller.defaults={axis:"y",containerDimensions:!1,timeout:0,displayElements:{element:void 0,percent:60,hide:!1,onShow:void 0,onHide:void 0},classes:{prefix:"scroller",toDisplay:"{prefix}-toDisplay",hidden:"is-hidden"},onComplete:void 0},o.Scroller.prototype={prepareOptions:function(){var i=this;return o.each(i.settings.classes,function(t,e){"string"==typeof e&&(i.settings.classes[t]=e.replace(/{prefix}/,i.settings.classes.prefix))}),!0},setOptions:function(t){return o.extend(!0,this.settings,t),this},init:function(){return this.requestAnimationFramePolyfill(),this.settings.containerDimensions&&this.setContainerDimensions(),void 0!==this.settings.onComplete&&this.settings.onComplete.call({scroller:this}),this},requestAnimationFramePolyfill:function(){var n=0,t=0,e=["o","ms","moz","webkit"];for(t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-n)),s=window.setTimeout(function(){t(e+i)},i);return n=e+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})},setOffset:function(t){return this.offset[t].x=parseInt(window.pageXOffset),this.offset[t].y=parseInt(window.pageYOffset),this},getOffset:function(t){return void 0!==this.offset[t]?this.offset[t]:this.offset},setContainerDimensions:function(){var t=this;return t.container.width=parseInt(window.innerWidth),t.container.height=parseInt(window.innerHeight),o(window).on("resize.scroller orientationchange.scroller",function(){t.container.width=parseInt(window.innerWidth),t.container.height=parseInt(window.innerHeight)}),t},getContainerDimensions:function(){return this.container},onScroll:function(e){var i=this;return o(window).on("scroll.scroller",function(t){clearTimeout(i.timeout),i.timeout=setTimeout(function(){i.setOffset("current"),i.hasDisplayElements()&&i.displayElementsOnScroll(),void 0!==e&&e.call({scroller:i,event:t,window:window,containerDimensions:i.getContainerDimensions(),offset:i.getOffset(),direction:i.getScrollDirection()}),i.setOffset("previous")},i.settings.timeout)}),i},getScrollDirection:function(){return"x"===this.settings.axis?this.offset.previous.x>this.offset.current.x?this.direction="left":this.offset.previous.x<this.offset.current.x&&(this.direction="right"):this.offset.previous.y>this.offset.current.y?this.direction="up":this.direction="down",this.direction},displayElements:function(t){var n=this;return o.extend(n.settings.displayElements,t),n.setOptions({timeout:0,windowDimensions:!0}),n.setContainerDimensions(),void 0===n.settings.displayElements.element&&(n.settings.displayElements.element=o("."+n.settings.classes.toDisplay)),n.settings.displayElements.element.length&&n.settings.displayElements.element.each(function(t,e){var i=(e=o(e)).offset();e.addClass(n.settings.classes.hidden);var s={element:e,offset:{top:parseInt(i.top),bottom:parseInt(i.top-e.height())}};"x"===n.settings.axis&&o.extend(s.offset,{left:parseInt(i.left),right:parseInt(i.left+e.width())}),n.toDisplay.push(s)}),n.displayElementsOnScroll(),n},hasDisplayElements:function(){return this.toDisplay.length},getDisplayLimit:function(){var t={x:0,y:0};return"x"===this.settings.axis?t.x=this.offset.current.x+this.container.width*this.settings.displayElements.percent/100:t.y=this.offset.current.y+this.container.height*this.settings.displayElements.percent/100,t},displayElementsOnScroll:function(){var i=this,s=i.getDisplayLimit();return o.each(i.toDisplay,function(t,e){("y"===i.settings.axis&&s.y>=e.offset.top||"x"===i.settings.axis&&s.x>=e.offset.left)&&(e.element.removeClass(i.settings.classes.hidden),void 0!==i.settings.displayElements.onShow&&i.settings.displayElements.onShow.call({scroller:i,toDisplay:e,displayLimit:s})),i.settings.displayElements.hide&&("y"===i.settings.axis&&s.y<e.offset.bottom||"x"===i.settings.axis&&s.x<e.offset.left)&&(e.element.addClass(i.settings.classes.hidden),void 0!==i.settings.displayElements.onHide&&i.settings.displayElements.onHide.call({scroller:i,toDisplay:e,displayLimit:s}))}),i}}}(jQuery);